
{
    "kind": "term",
    "name": "ss_omnichannel",
    "count": 1,
    "items": [

    
        {
            "weight": "1",
            "url": "https://docs.tealium.com/ja/server-side/data-sources/file-import/about/",
            "title": "ファイルのインポートについて",
            "body":"<h2 id=\"前提条件\">前提条件</h2><ul><li>Tealium AudienceStream CDP <strong>または</strong></li><li>Tealium EventStream API Hub</li></ul><p class=\"note\"><i class=\"fa fa-exclamation-triangle\"></i>正しくインポートするためには、CSVファイルを正しくフォーマットする必要があります。ファイルとデータの形式については、<a href=\"/ja/server-side/data-sources/file-import/prepare-a-csv-file/\">インポート用のCSVファイルを準備する</a>を参照してください。</p><h2 id=\"仕組み\">仕組み</h2><p>Tealiumサーバーを使用してファイルサービス（Amazon S3バケットなど）に接続し、ファイルを読み込み、データをインポートします。各インポートされた行はイベントとして処理されます。インポート後、データは豊かになり、既存の訪問プロファイルにステッチされ、他のベンダーに送信されます。</p><h3 id=\"レート制限\">レート制限</h3><p>1秒あたりの処理行数は変動します。レート制限は通常、ピークレートで1秒あたり100行、最低レートで1秒あたり50行となります。</p><h3 id=\"イベント\">イベント</h3><p>デフォルトのTealium <a href=\"/ja/server-side/getting-started/order-of-operations/\">データ収集の操作順序</a>では、ファイルインポートデータソースからのイベントは_イベント受信_ステップの前に処理され、操作順序は変わりません。</p><p>ファイルインポートイベントは、他のデータソースからのイベントと同様にEventStreamとAudienceStreamに送信されますが、以下の重要な例外があります：</p><ul><li><strong>ブラウザ固有の属性</strong>：クライアントIPアドレスやユーザーエージェントなどのブラウザ固有の属性は入力されません。</li><li><strong>エンリッチメント</strong>：AudienceStreamの事前にロードされた属性に対するエンリッチメントは実行されませんが、<strong>First Visit</strong>の事前にロードされた属性は例外です。</li><li><strong>関数</strong>：データ変換関数は実行されません。</li><li><strong>単一ページ訪問</strong>：入力イベントは単一ページ訪問/訪問の基準から除外されます。他のデータソースからの単一ページ訪問と訪問はAudienceStreamには保存されません。単一ページ訪問/訪問についての詳細は、<a href=\"https://support.tealiumiq.com/en/support/solutions/articles/36000363388-how-are-single-page-visits-processed-in-audiencestream-\">AudienceStreamで単一ページ訪問はどのように処理されますか？</a>（Tealiumのログインが必要）を参照してください。</li><li><strong>訪問の長さ</strong>：ファイルインポートイベントによって開始された訪問は60秒間続きます。</li><li><strong>訪問IDのマッピング</strong>：ファイルインポートデータソースの構成でAudienceStreamの訪問ID属性をマッピングすると、訪問IDは選択した列の値に直接構成されます。</li></ul><p>さらに、ファイルインポートデータソースからの入力データに以下のイベント属性を使用することができます：</p><ul><li><code>_source_file</code> (String) - イベントに関連するファイルの名前。</li><li><code>_file_line_num</code> (Integer) - イベントに関連するファイルの行。</li></ul><h2 id=\"ファイルインポートデータソースの構成\">ファイルインポートデータソースの構成</h2><p>ファイルインポートをデータソースとして構成するには2つのステップがあります：</p><ol><li><p><strong>列のマッピングとファイル転送サービスの構成</strong><br>ファイルインポートデータソースを構成するには、CSVファイルの列をTealiumのイベント属性にマッピングし、ファイル転送サービスを選択します。<p class=\"tip\"><i class=\"fa fa-info-circle\"></i>列のマッピングを補助するために、列ラベルと最大1,000行のデータを含むサンプルCSVファイルをアップロードします。</p></p></li><li><p><strong>ファイルをファイル転送サービスにアップロードする</strong><br>データソースの構成が完了したら、CSVファイルをファイルサービスにアップロードします。ファイルのアップロードはTealiumの外部で行われます。</p></li></ol><h3 id=\"ステップ1csv列のマッピングとファイル転送サービスの構成\">ステップ1：CSV列のマッピングとファイル転送サービスの構成</h3><h4 id=\"列のマッピング\">列のマッピング</h4><p>列のマッピング構成は、CSVファイルの各列に対応するイベント属性を決定します。列名はCustomer Data Hubの属性名とは異なることが多いため、このマッピングによりデータが正しくインポートされます。例えば、CSVファイルには<code>postalCode</code>という名前の列があるかもしれませんが、対応するイベント属性は<code>customer_zip</code>という名前なので、これらの列を関連付けるためにマッピングする必要があります。</p><p>マッピングは、既存のイベント仕様に基づいて構成することも、カスタムイベントとして構成することもできます。</p><h5 id=\"イベント仕様マッピング\">イベント仕様マッピング</h5><p>CSVファイルの各行はイベントとして処理されます。イベント仕様マッピングを選択すると、<strong>列マッピング</strong>テーブルでイベント属性が事前に選択されます。各行は選択した仕様のイベントとして処理されます。例えば<code>tealium_event = &quot;purchase&quot;</code>。</p><h5 id=\"カスタムマッピング\">カスタムマッピング</h5><p>カスタムイベントマッピングを選択する場合、各CSV列に対応するイベント属性を指定します。各行は以下のイベント識別子でイベントとして処理されます：</p><p><code>tealium_event = &quot;imported&quot;</code></p><h5 id=\"訪問idのマッピング\">訪問IDのマッピング</h5><p>インポートされたデータがウェブ、モバイル、HTTP APIなどの他のソースとステッチされるようにするためには、ファイルインポートソースファイルの各行に一意の訪問IDの列があることを確認します。その後、訪問IDの列と対応するイベント属性を訪問ID属性（AudienceStreamでの訪問識別のための一意の属性タイプ）にマッピングします。マッピングされたイベント属性の値は<code>tealium_visitor_id</code>属性に割り当てられ、既存の訪問プロファイルに直接マッチします。</p><p>AudienceStreamでの訪問IDマッピングについての詳細は、<a href=\"/ja/server-side/data-sources/file-import/visitor-identification/\">ファイルインポートデータソースを使用した訪問識別</a>を参照してください。</p><h4 id=\"ファイル転送サービス\">ファイル転送サービス</h4><p>ファイル転送サービスは、インポートするファイルをアップロードするための安全な場所です。Tealiumは以下のファイル転送サービスをサポートしています：</p><ul><li><p>Amazon S3 (Tealiumバケットまたは自分のバケット) - Tealiumは<a href=\"https://docs.aws.amazon.com/vpc/latest/userguide/endpoint-services-overview.html\">AWSネットワークを通じて直接Tealium S3バケットにアクセスするためのVPCエンドポイント</a>を使用します。<p class=\"note\"><i class=\"fa fa-exclamation-triangle\"></i>S3バケットに大量のファイルを保存すると、読み取り時間が遅くなる可能性があります。効率的な読み取り時間を維持するために、処理済みのファイルを定期的にS3バケットから削除することをお勧めします。</p></p></li><li><p>Microsoft Azure File/Blob Storage</p></li><li><p>FTP/SFTP - 以下の認証方法をサポートしています：</p><ul><li>パスワード</li><li>プライベートキーファイルのアップロード</li><li>キーペアの生成</li></ul></li></ul><h5 id=\"tealium-s3ファイル保持\">Tealium S3ファイル保持</h5><p>ファイルインポート構成でTealium S3バケットを使用することにより、以下のファイル保持ポリシーに同意したことになります：</p><ul><li><strong>1-3年</strong> - Tealium S3バケットにファイルをアップロードしてから1年後、ファイルは長期保存用のリポジトリに移動されます。ファイルは最大3年間アクセス可能です。長期保存からファイルを取得すると、要求されたアイテムのサイズと数に応じて最小から適度なサービス料が発生します。ファイルを取得するには、Tealiumサポートに連絡してください。</li><li><strong>3年以上</strong> - Tealium S3バケットにファイルをアップロードしてから3年後、ファイルは永久に削除されます。ビジネスケースが3年以上の保存を必要とする場合は、長期データ保持期間を顧客契約に明示的に記載する必要があります。長期保持ポリシーを要求するには、Tealiumサポートに連絡してください。</li></ul><h3 id=\"ステップ2ファイルをファイル転送サービスにアップロードする\">ステップ2：ファイルをファイル転送サービスにアップロードする</h3><p>ファイルインポートデータソースの構成が完了したら、選択したファイルサービスにファイルをアップロードします。</p><p>Tealiumは以下の操作順序でファイルをインポートします：</p><ol><li><strong>新しいファイルの確認</strong><br>システムは10分ごとにファイル転送サービスをチェックして新しいファイルがないか確認します。</li><li><strong>新しいファイルのコピー</strong><br>新しいファイルが検出されると、それはファイル転送場所からコピーされ、Customer Data Hubで処理されます。</li><li><strong>ファイル名のプレフィックスをファイルインポートデータソースにマッチさせる</strong><br>ファイル名のプレフィックスは、ファイルのデータをインポートする際にどのファイルインポートデータソースを使用するかを識別するために使用されます。</li><li><strong>ファイルの処理</strong><br>ヘッダーラインが読み取られ、インポートされる属性が識別されます。ヘッダーラインを読み取った後、以下の処理が行われます：<ol><li><p><strong>訪問の検索</strong> — 訪問IDはAudienceStreamで訪問レコードを検索するために使用されます。既存の訪問レコードが見つからない場合は新たに作成されます。<p class=\"tip\"><i class=\"fa fa-info-circle\"></i>同じ訪問IDの行をグループ化すると、インポート時間が短縮されます。</p></p></li><li><p><strong>属性のエンリッチメント</strong> - 訪問レコードは、インポートされた属性とアカウント内の既存のエンリッチメントに基づいてエンリッチメントされます。</p></li></ol></li></ol>"
        }  

    ]
}
